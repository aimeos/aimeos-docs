{#-
	This file was automatically generated - do not edit
  -#}
  {% set disqus = config.extra.disqus %}
  {% if page and page.meta and page.meta.disqus is string %}
	{% set disqus = page.meta.disqus %}
  {% endif %}
  {% if not page.is_homepage and disqus %}
	<div class="disqus">
		<h2 id="__comments">{{ lang.t("meta.comments") }}</h2>
		<div id="disqus_thread"></div>
		<script>
			var disqus_config=function(){
				this.page.url="{{ page.canonical_url }}",
				this.page.identifier="{{ page.canonical_url | replace(config.site_url, '') }}"
			};
			var disqus_create=function(){
				el=document.createElement("script");
				el.src="https://{{ disqus }}.disqus.com/embed.js";
				el.setAttribute("data-timestamp",+new Date);
				document.body.appendChild(el);
			};

			if('IntersectionObserver' in window) {
				let observer = new IntersectionObserver(function(entries, observer) {
					for(let entry of entries) {
						if(entry.isIntersecting) {
							observer.unobserve(entry.target);
							disqus_create();
						}
					}
				},{
					rootMargin: '0px 0px 50% 0px',
					threshold: 0.01
				});
				observer.observe(document.querySelector('#__comments'));
			} else {
				disqus_create();
			}
		</script>
	</div>
  {% endif %}



<!-- User-preference: link content tabs -->
{% if "content.tabs.link" in features %}
  <script>
    var tabs = __md_get("__tabs")
    if (Array.isArray(tabs))
      main: for (var set of document.querySelectorAll(".tabbed-set")) {
        var labels = set.querySelector(".tabbed-labels")
        for (var tab of tabs)
          for (var label of labels.getElementsByTagName("label"))
            if (label.innerText.trim() === tab) {
              var input = document.getElementById(label.htmlFor)
              input.checked = true
              continue main
            }
      }
  </script>
{% endif %}